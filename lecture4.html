<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculus 2: Lesson 4</title>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="assets/style.css">
    <script type="text/javascript">
    MathJax = {
        tex: {
            inlineMath: [['\\(', '\\)']],
            displayMath: [['$$', '$$']]
        }
    };
</script>
<script type="text/javascript" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0 auto;
            max-width: 800px;
            padding: 20px;
        }
        h1 {
            text-align: center;
        }
       ul {
    list-style-type: disc;
    margin: 10px 0;
    padding-left: 20px;
}

ul ul {
    list-style-type: circle; /* For nested lists */
    margin: 5px 0;
    padding-left: 20px;
}

li {
    margin: 5px 0; /* Adds spacing between list items */
}

        a {
            color: #007BFF;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 2px solid black;
            padding: 8px;
            text-align: left;
        }
        h3 {
            margin-bottom: 0; /* Removes bottom margin */
            padding-bottom: 0; /* Removes bottom padding */
        }
    <\style>
        <style type="text/css">
      @media (prefers-color-scheme: dark) {
         html {
           filter: invert(100%);
        }

        .youtube-container iframe {
          filter: invert(100%);
        }

        .noreverse {
          filter: invert(100%);
        }
      }
      .desmos-container {
        overflow: hidden;
        padding-bottom: 100%;
        position: relative;
        height: 0;
      }

      .desmos-container iframe {
        height: 95%;
        width: 95%;
        left: 0;
        position: absolute;
        top: 0;
      }

      .youtube-container {
        overflow: hidden;
        padding-bottom: 56.25%;
        position: relative;
        height: 0;
      }

      .youtube-container iframe {
        height: 100%;
        width: 100%;
        left: 0;
        position: absolute;
        top: 0;
      }
    </style>
    <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js">
    </script>
</head>
<body>
    <h1>Integration by Parts</h1>
    <p>
        We know that \(\int e^xdx=e^x+C\), we know \(\int xe^{x^2}dx\) can be computed using the substitution \(u=x^2\). What about \(\int xe^xdx\) or \(\int ln(x)dx\)? It looks like we need a new technique.
Remember the product rule?

\[(gf)^\prime = g^\prime f + gf^\prime\]

We now reverse the product rule:
\[\int g^\prime(x)f(x) dx + \int g(x) f^\prime(x) dx = g(x) f(x) + C\]

\[\int g(x) f^\prime(x) dx =g(x) f(x) - \int g^\prime(x) f(x) dx + C\]
 </p>
<p>Substitute
<ul>
    <li>\(u = f(x),du = f^\prime(x) dx\)</li>
    <li>\(v = g(x), dv = g^\prime(x) dx\)</li>
</ul>
</p>
   <p>Then \[\int u dv = uv - \int v du\] This method is called <strong>integration by parts</strong>.</p>
    <h2>Simple Examples</h2>
    <p>
        Compute \(\int xe^{{x}}dx\). If we label the parts of the integrand (the expression inside the integral symbol) \(u=x\) and \(dv=e^xdx\), then we get \(du=dx\) and \(v=\int e^xdx=e^x\).
According to the formula, \[\int xe^{{x}}dx = xe^x - \int e^xdx=xe^x-e^x+C\] What happens, if we label \(u=e^{{x}}\) and \(dv=xdx\)? Then \(du =e^{{x}}dx\), \(v=\frac{x^2}{{2}}\) and we end up with \(\int xe^{{x}}dx = \frac{ x^2e^x}{{2}} - \int\frac{x^2e^x}{{2}} dx\),
        a more complex integral than the original.      
    </p>
    <h3>Rules of Thumb</h3>
    <p>
        <ul>
            <li>\(u\) should be easy to differentiate</li>
            <li>\(du\) should be simpler than \(u\)</li>
            <li>\(dv\) should be easy to integrate</li>
              <li>\(v\) should not be more complicated than \(dv\)</li>  
        </ul>
    </p>
    <p>
        Compute \(\int\ln(x)dx\). At first glance, we can’t integrate by parts, because there aren’t two parts! But note that we can write \(\ln(x)=1 \cdot\ln(x)\),
        so we can set \(u=\ln(x)\) and \(dv=1\cdot dx=dx\). That inplies \(du=\frac{{dx}}{{x}}\)and \(v=x\).
        Then \(\int\ln(x)dx=x\ln(x)-\int x\cdot \frac{{1}}{{x}}dx=x\ln(x)-\int dx=x\ln(x)-x+C\)
    </p>
    <p>
       Compute \(\int\arctan(x)dx.\) As we did in the previous example, we try \(dv=dx\) and \(u=\arctan(x)\), then \(v=x\) and \(du = \frac{{dx}}{1+x^2}.\) Then \(\int\arctan(x)dx=x\arctan(x)-\int\frac{{xdx}}{1+x^2}\). To compute the latter integral we use \(w\)-substitution, let \(w=1+x^2\). Then \(dw=2xdx\), \(xdx=\frac{{dw}}{{2}}\) and \(\int\frac{{xdx}}{1+x^2}=\frac{{1}}{{2}}\int\frac{{dw}}{{w}}=\frac{{1}}{{2}}\ln(1+x^2)+C.\) Eventually, \(\int\arctan(x)dx=x\arctan(x)=\frac{{1}}{{2}}\ln(1+x^2)+C.\) 
    </p>
    <p><strong>Rule of Thumb</strong>
If the integrand consists of a single term, try \(dv=dx\).</p>
    <h3><strong>DIY</strong></h3>
    <p>
<ol>
    <li>\(\int x\ln(x) dx\)</li>
    <li>\(\int \frac{\ln(x)}{x^2} dx\)</li>
</ol>     
    </p>
    <p>
        <details>
<summary>Check your answers</summary>
<ol>
<li>\(\frac{x^2}{{2}}\ln(x) - \frac{x^2}{{4}} + C\)</li>
<li>\(-\frac{\ln(x)}{{x}} - \frac{{1}}{{x}} + C\)</li>
</ol>
</details>
    </p>

    <h3>Guidance for choosing \(u\) and \(dv\)</h3>
    <p>
        <ul>
            <li>For \(u\): polynomials, inverse trig functions, logarithms</li>
            <li>For \(dv\): trig functions (sin/cos), exponential functions</li>
        </ul>
    </p>
    <h2>Multiple Steps</h2>
    <p>
        It’s possible that one needs to integrate by parts multiple times. For example, what if we need to compute \(\int x^2 \cos(x) dx\)?
        We can set \(u = x^2, dv = \cos(x) dx\) and end up with \(\int x^2 \cos(x) dx=x^2 \sin(x) - \int 2x \sin(x) dx\).
        Then to compute \(\int 2x \sin(x) dx\) we would again need to integrate by parts. So be aware that you may need to continue on several steps!
        Luckily, the integral we are computing in the second step is simpler than the original integral.
        Sometimes it seems like we may be going around in circles. Here is an example. 
    </p>
    <p>
        Compute \(\int e^x \cos(x) dx\).
There is no obvious \(u\) here. Remember: for \(u\), we want a term so that \(du\) is simpler. But whether we choose \(u=e^x\) or \(u=\cos(x)\), 
        we end up with a similarly complex problem. So what should we do? Just pick one. Let \(u=e^x\) or \(dv=\cos(x)dx\),
        then \(du=e^xdx\) and \(v=\sin(x)\), and our integral is \[\int e^x \cos(x) dx = e^x \sin(x) - \int e^x \sin(x) dx\] 
        Now let’s integrate by parts \(\int e^x \sin(x) dx\), i.e. set \(u=e^x\) , and \(dv = \sin(x) dx\). Then \(du=e^xdx\), and \(v=-\cos(x)\). So now \[\int e^x \cos(x) dx=e^x \sin(x) - (e^x(-\cos(x)) - \int (e^x)(-\cos(x)) dx)\] Distributing negatives, we get \[\int e^x \cos(x) dx=e^x \sin(x) + e^x \cos(x) - \int e^x \cos(x) dx\] 
        But now we are back to square one: the original problem was to compute \(\int e^x \cos(x) dx\)!
    </p>
    <p>
        So what do we do? Take a second to look at everything we have done. We know that the integral \(\int e^x \cos(x) dx\) is equal to:\[e^x \sin(x) + e^x \cos(x) - \int e^x \cos(x) dx\] 
        The fact that \(\int e^x \cos(x) dx\) is on both sides makes it appear that we did something wrong.
        But actually, we can use algebra to solve this problem: add \(\int e^x \cos(x) dx\) to both sides, 
        then: \[2 \int e^x \cos(x) dx = e^x \sin(x) + e^x \cos(x)\] Or \[\int e^x \cos(x) dx = \frac{e^x \sin(x) + e^x\cos(x)}{{2}} + C\] 
Exercise: Compute \(\int e^x \sin(x) dx\).
    </p>
    <p><strong>Keep practicing! Technique comes with practice and luck is useful too!</strong></p>
    <p>
    <strong> Exercise:</strong><br/>
        Compute \(\int e^x \sin(x) dx\).
    </p>
    </body>
</html>
